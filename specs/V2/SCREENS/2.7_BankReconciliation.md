# 2.7 Rapprochement Bancaire ‚≠ê NOUVEAU

**Fichier** : `src/pages/BankReconciliation.tsx` (√† cr√©er)
**Maquette** : `specs/V2/mockups/rapprochement.html`
**Statut** : üî¥ Non commenc√©

---

## T√¢ches

### 2.7.1 Cr√©er route `/reconciliation`
- [ ] Ajouter dans `App.tsx`

### 2.7.2 Filtres
- [ ] Input : Recherche montant exact (‚Ç¨)
- [ ] Input : Recherche client ou N¬∞ facture
- [ ] Dropdown : Statut (Tous, En attente, En retard)

### 2.7.3 Table factures √† rapprocher
- [ ] Colonnes : Client/N¬∞ Facture, √âch√©ance, Statut, Solde D√ª
- [ ] Bouton "Enregistrer paiement" par ligne ‚Üí Ouvre modal

### 2.7.4 Modal enregistrement paiement
- [ ] Header : Infos facture (Client, N¬∞, Montant total)
- [ ] Onglets : "Virement" vs "Ch√®que(s)"

### 2.7.5 Modal - Onglet Virement
- [ ] DatePicker : Date de paiement
- [ ] Input : Montant (‚Ç¨)
- [ ] Validation : Bouton "Enregistrer"

### 2.7.6 Modal - Onglet Ch√®que(s)
- [ ] Liste dynamique de ch√®ques
- [ ] Par ch√®que : Input montant + DatePicker date
- [ ] Bouton "+ Ajouter un ch√®que"
- [ ] Total calcul√© en temps r√©el
- [ ] Validation : Bouton "Enregistrer"

### 2.7.7 Mise √† jour en temps r√©el
- [ ] Si montant = solde d√ª ‚Üí Statut "Pay√©e" (green badge)
- [ ] Si montant < solde d√ª ‚Üí Statut "Paiement partiel" (orange badge)
- [ ] Refresh table apr√®s enregistrement

---

## Backend requis

- [ ] Query `reconciliation.getUnpaidInvoices`
- [ ] Mutation `reconciliation.recordPayment`
  - Args : invoiceId, paymentType (virement/cheque), payments (array), totalAmount
  - Update invoice : paidAmount, status, paidDate
- [ ] Table `payments` (optionnel : historique paiements d√©taill√©)
  - Champs : invoiceId, type, amount, date, chequeNumber?, createdAt
