# 2.8 Suivi des Relances

**Fichier** : `src/pages/FollowUp.tsx`
**Maquette** : `specs/V2/mockups/agenda.html`
**Statut** : üü¢ UI compl√®te, actions √† c√¢bler

---

## T√¢ches

### 2.8.1 Cr√©er route `/follow-up`
- [x] Ajouter dans `App.tsx`

### 2.8.2 Onglets principaux
- [x] Onglet 1 : "√Ä Venir" (badge count)
- [x] Onglet 2 : "Historique" (pas de badge count)

### 2.8.3 Onglet "√Ä Venir" - Groupement par date
- [x] Sections : Aujourd'hui, Demain, Plus tard
- [x] Tri chronologique

### 2.8.4 Onglet "√Ä Venir" - Cards relance
- [x] Ic√¥ne type action (Email, Phone)
- [x] Client + N¬∞ Facture
- [x] Montant + Retard (jours)
- [x] Date/heure pr√©vue
- [x] Boutons UI : "Modifier" (email), "Marquer fait" (phone), "Pause"
- [ ] C√¢bler actions des boutons (onClick handlers + mutations)

### 2.8.5 Onglet "Historique" - Timeline verticale
- [x] Groupement par date (Aujourd'hui, Hier, Cette semaine, etc.)
- [x] Timeline composant custom
- [x] Ic√¥nes d'√©v√©nements :
  - invoice_imported (FileUp)
  - invoice_sent / invoice_marked_sent (Mail)
  - reminder_sent email (Bell)
  - reminder_sent phone (Phone)
  - payment_registered / invoice_marked_paid (Check green)
- [x] Infos : Client, N¬∞ Facture, Montant, Description

### 2.8.6 Actions √† c√¢bler (Frontend)
- [ ] Bouton "Pause" : Modal confirmation ‚Üí Appel `followUp.pauseReminder` ‚Üí Refresh
- [ ] Bouton "Modifier" (email) : Modal √©dition ‚Üí Appel `followUp.updateReminder` ‚Üí Refresh
- [ ] Bouton "Marquer fait" (phone) : Modal outcome ‚Üí Appel `followUp.completePhoneReminder` ‚Üí Refresh

---

## Backend requis

### Queries (‚úÖ Impl√©ment√©es)
- [x] Query `followUp.getUpcomingReminders` (filtre `completionStatus='pending'`, group√©es par date)
- [x] Query `followUp.getReminderHistory` (√©v√©nements pass√©s depuis table `events`)

### Mutations (‚úÖ Impl√©ment√©es)
- [x] Mutation `followUp.pauseReminder` (met `isPaused: true`)
- [x] Mutation `followUp.resumeReminder` (met `isPaused: false`)
- [x] Mutation `followUp.updateReminder` (modifie emailSubject/emailContent ou phoneNotes)
- [x] Mutation `followUp.rescheduleReminder` (change reminderDate)
- [x] Mutation `followUp.completePhoneReminder` (marque phone reminder completed avec outcome)

### Schema (‚úÖ Impl√©ment√©)
- [x] Champ `isPaused: v.optional(v.boolean())` dans table `reminders`
- [x] Champ `completionStatus` avec valeurs: pending, completed, failed
- [x] Table `events` pour historique des √©v√©nements
